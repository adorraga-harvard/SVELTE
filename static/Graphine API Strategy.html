<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graphine API Strategy</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; padding: 20px; }
        h1 { color: #007bff; }
        h2 { color: #333; }
        pre { background: #eee; padding: 10px; border-radius: 5px; overflow: auto; }
        .container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div class="container">
        <h1>Graphine API Strategy</h1>

        <h2>Global Structure & Reusability</h2>
        <p>Strategic placement of functions to maximize efficiency and modularity.</p>

        <h2>üèó API Infrastructure</h2>
        <ul>
            <li><strong>Global Utility Module (apiUtils.ts):</strong> Stores reusable API request functions.</li>
            <li><strong>Middleware Layer (middleware.ts):</strong> Handles security, validation, and request transformation.</li>
            <li><strong>Dedicated API Controller (pinoy.controller.ts):</strong> Manages request routing and execution logic.</li>
            <li><strong>Graphine Fixture (pinoy.endpoint.ts):</strong> Serves as the API gateway for all incoming traffic.</li>
        </ul>

        <h2>üöÄ API Request Function</h2>
        <pre>
async function apiRequest(subject: string, predicate: object): Promise<any> {
    const endpoint = "/private-api/pinoy/?api=deface";

    const requestBody = { obj: { Subject: subject, Predicate: predicate } };

    const res = await fetch(endpoint, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(requestBody)
    });

    return res.json().catch(err => {
        console.error("‚ùå Failed to parse JSON response:", err);
        return { error: "Invalid response format." };
    });
}

// Example Usage:
const result = await apiRequest("getAddress", { search: activeKeyboardValue, place: currentInputElement });
console.log("üõ† Deface API Response:", result);
        </pre>

        <h2>üõ† Debugging & Observability</h2>
        <ul>
            <li>Ensure client sends the correct JSON payload.</li>
            <li>Verify request method (POST).</li>
            <li>Check server logs for request parsing errors.</li>
        </ul>

        <h2>üî• Next Steps</h2>
        <p>Ready to integrate deeper into the Graphine framework, ensuring full API transformation.</p>
    </div>
</body>
</html>
